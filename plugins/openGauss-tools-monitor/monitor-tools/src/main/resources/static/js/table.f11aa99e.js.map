{"version":3,"file":"js/table.f11aa99e.js","mappings":"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","sources":["webpack://opengauss/./src/views/IndexRelease.vue","webpack://opengauss/./src/views/IndexRelease.vue?ff68","webpack://opengauss/./src/views/fileGeneration.vue","webpack://opengauss/./src/views/fileGeneration.vue?1f0e"],"sourcesContent":[" <!-- * Copyright (c) 2020 Huawei Technologies Co.,Ltd.\r\n *\r\n * openGauss is licensed under Mulan PSL v2.\r\n * You can use this software according to the terms and conditions of the Mulan PSL v2.\r\n * You may obtain a copy of Mulan PSL v2 at:\r\n *\r\n *          http://license.coscl.org.cn/MulanPSL2\r\n *\r\n * THIS SOFTWARE IS PROVIDED ON AN \"AS IS\" BASIS, WITHOUT WARRANTIES OF ANY KIND,\r\n * EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,\r\n * MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.\r\n * See the Mulan PSL v2 for more details. -->\r\n<template>\r\n<div class=\"layout\">\r\n            <header id=\"header\">\r\n                <span class=\"dataStyle\">指标发布</span>\r\n                <div style=\"padding-bottom: 16px;\">\r\n                    <el-button size=\"large\" type=\"primary\" @click=\"updateRow('')\">批量发布</el-button>\r\n                    <el-button size=\"large\" class=\"buttonColor\" @click=\"deleteRow('','','all')\">批量删除</el-button>\r\n                </div>\r\n            </header>\r\n            <div id=\"layoutCss\">\r\n                <el-card shadow=\"never\" style=\"margin-bottom: 16px;\">\r\n                    <el-row class=\"rowColor\">\r\n                        <el-col :span=\"1\" style=\"text-align: center;padding-top: 16px;\">\r\n                            <el-icon style=\"font-size:20px\"><WarningFilled /></el-icon>\r\n                        </el-col>\r\n                        <el-col :span=\"23\" style=\"font-size: 14px;\">\r\n                            <p class=\"tipck\">发布指标：对已生成的SQL指标进行发布，支持按指标分组、监控平台进行指标筛选，同时回显已发布过的SQL指标，选中指标即可发布到主机</p>\r\n                            <p class=\"tipck\">修改主机：对主机信息进行修改</p>\r\n                            <p class=\"tipck\">删除主机：对主机进行删除，同时该主机上所有已发布指标也一同删除</p>\r\n                            <p class=\"tipck\">批量发布：可选中多台主机进行批量发布，支持按指标分组、监控平台进行指标筛选，选中指标即可批量发布到主机</p>\r\n                            <p class=\"tipck\">批量删除：删除选中的主机，同时对应主机所有已发布的指标也一同删除</p>\r\n                        </el-col>\r\n                    </el-row>\r\n                </el-card>\r\n                    <el-table\r\n                    :data=\"tableData\"\r\n                    style=\"width: 100%\"\r\n                    ref=\"table\"\r\n                    :header-cell-style=\"{fontWeight:'normal',textAlign: 'center'}\"\r\n                    :cell-style=\"{padding: '4px 0px',textAlign: 'center'}\"\r\n                    row-key=\"dataSourceId\"\r\n                    >\r\n                    <el-table-column\r\n                    type=\"selection\"\r\n                    width=\"55\"\r\n                    align=\"center\"\r\n                    :reserve-selection=\"true\">\r\n                    </el-table-column>\r\n                    <el-table-column type=\"expand\">\r\n                        <template v-slot=\"props\">\r\n                          <el-table \r\n                          :data=\"props.row.targets\"\r\n                          :cell-style=\"{padding: '4px 0px',textAlign: 'center'}\"\r\n                          :header-cell-style=\"{fontWeight:'normal',textAlign: 'center'}\"\r\n                          style=\"width: calc(100% - 103px);margin-left: 103px;\">\r\n                            <el-table-column\r\n                            prop=\"createTime\"\r\n                            label=\"生成时间\"\r\n                            width=\"150\"\r\n                            >\r\n                            </el-table-column>\r\n                            <el-table-column\r\n                            label=\"SQL详情\"\r\n                            prop=\"target\"\r\n                            show-overflow-tooltip\r\n                            >\r\n                            </el-table-column>\r\n                            <el-table-column\r\n                            label=\"指标分组\"\r\n                            prop=\"targetGroup\"\r\n                            show-overflow-tooltip\r\n                            width=\"100\"\r\n                            >\r\n                            </el-table-column>\r\n                            <el-table-column\r\n                            label=\"监控平台\"\r\n                            prop=\"platform\"\r\n                            show-overflow-tooltip\r\n                            width=\"150\"\r\n                            >\r\n                            </el-table-column>\r\n                            <el-table-column label=\"操作\" width=\"220\">\r\n                              <template v-slot=\"scope\">\r\n                                <el-button\r\n                                @click.prevent=\"deleteRowIndex(scope.$index, props.row,'')\"\r\n                                link type=\"primary\"\r\n                                size=\"small\">\r\n                                删除指标\r\n                            </el-button>\r\n                              </template>\r\n                            </el-table-column>\r\n                          </el-table>\r\n                        </template>\r\n                      </el-table-column>\r\n                    <el-table-column\r\n                    prop=\"connectName\"\r\n                    label=\"实例名称\"\r\n                    show-overflow-tooltip\r\n                    width=\"150\"\r\n                    >\r\n                    </el-table-column>\r\n                    <el-table-column\r\n                    label=\"主机地址\"\r\n                    prop=\"ip\"\r\n                    show-overflow-tooltip\r\n                    >\r\n                    </el-table-column>\r\n                    <el-table-column\r\n                    label=\"主机端口\"\r\n                    prop=\"port\"\r\n                    show-overflow-tooltip\r\n                    width=\"100\"\r\n                    >\r\n                    </el-table-column>\r\n                    <el-table-column\r\n                    label=\"最后发布时间\"\r\n                    prop=\"lastReleaseTime\"\r\n                    show-overflow-tooltip\r\n                    width=\"150\"\r\n                    >\r\n                    </el-table-column>\r\n                    <el-table-column\r\n                    label=\"操作\"\r\n                    width=\"220\">\r\n                    <template v-slot=\"scope\">\r\n                        <el-button\r\n                            @click.prevent=\"updateRow(scope.row)\"\r\n                            link type=\"primary\"\r\n                            size=\"small\">\r\n                            发布指标\r\n                        </el-button>\r\n                        <el-button\r\n                            @click.prevent=\"detail(scope.row)\"\r\n                            link type=\"primary\"\r\n                            size=\"small\">\r\n                            修改主机\r\n                        </el-button>\r\n                        <el-button\r\n                            @click.prevent=\"deleteRow(scope.$index, tableData,'')\"\r\n                            link type=\"primary\"\r\n                            size=\"small\">\r\n                            删除主机\r\n                        </el-button>\r\n                    </template>\r\n                    </el-table-column>\r\n              </el-table>\r\n              <el-pagination\r\n                background\r\n                :pager-count=\"5\"\r\n                :total=\"total\"\r\n                @current-change=\"handleCurrentChange\"\r\n                :current-page=\"current\" style=\"text-align: end;padding: 16px 0px 16px 16px;\"\r\n                @size-change=\"handleSizeChange\"\r\n                :page-sizes=\"[20, 50, 100]\"\r\n                :page-size=\"pageSize\"\r\n                layout=\"->,total, sizes, prev, pager, next, jumper\"\r\n                >\r\n              </el-pagination>\r\n            </div>\r\n        <el-dialog\r\n            title=\"主机配置修改\"\r\n            v-model =\"dialogVisible\"\r\n            width=\"33%\"\r\n            top=\"25vh\"\r\n            class=\"indexClass\"\r\n            destroy-on-close\r\n            :close-on-click-modal = false>\r\n            <div>\r\n                        <el-form :model=\"ruleForm\" :label-position=\"'left'\" :rules=\"rulesHost\" ref=\"updateForm\" label-width=\"82px\" class=\"demo-ruleForm \"\r\n                            style=\"margin-top: 14px;\">\r\n                            <el-form-item label=\"实例名称\" prop=\"connectName\">\r\n                                <el-input v-model=\"ruleForm.connectName\" placeholder=\"示例：业务名_master\" :readonly=\"isReadOnly\"></el-input>\r\n                            </el-form-item>\r\n                            <el-form-item label=\"主机地址\" prop=\"ip\">\r\n                                <el-input v-model=\"ruleForm.ip\" placeholder=\"示例：192.168.0.10\" :readonly=\"true\"></el-input>\r\n                            </el-form-item>\r\n                            <el-form-item label=\"主机端口\" prop=\"port\">\r\n                                <el-input v-model=\"ruleForm.port\" placeholder=\"示例：5432\"></el-input>\r\n                            </el-form-item>\r\n                            <el-form-item label=\"只读用户\" prop=\"userName\">\r\n                                <el-input v-model=\"ruleForm.userName\" placeholder=\"示例：zabbix_readonly\"></el-input>\r\n                            </el-form-item>\r\n                            <el-form-item label=\"登录密码\" prop=\"password\">\r\n                                <el-input type=\"password\" v-model=\"ruleForm.password\" placeholder=\"示例：d(*dS1\"></el-input>\r\n                            </el-form-item>\r\n                        </el-form>\r\n            </div>\r\n            <template v-slot:footer>\r\n                <span class=\"dialog-footer\">\r\n                    <el-button class=\"buttonColor\" @click=\"dialogVisible = false\">取 消</el-button>\r\n                    <el-button type=\"primary\" @click=\"updateHost('updateForm')\">保 存</el-button>\r\n                </span>\r\n            </template>\r\n        </el-dialog>\r\n        <el-dialog\r\n            title=\"指标发布\"\r\n            v-model =\"indexDialogVisible\"\r\n            width=\"60%\"\r\n            class=\"indexClass\"\r\n            destroy-on-close\r\n            :close-on-click-modal = false>\r\n            <div style=\"height:56vh;\">\r\n                    <el-table\r\n                    :data=\"tableDataIndex.slice((currentIndex - 1) * pageSizeIndex, (currentIndex - 1) * pageSizeIndex + pageSizeIndex)\"\r\n                    style=\"width: 100%\"\r\n                    class=\"indexClass\"\r\n                    ref=\"indexTable\"\r\n                    :header-cell-style=\"{fontWeight:'normal'}\"\r\n                    :cell-style=\"{padding: '8px 0px'}\"\r\n                    @filter-change=\"filterChange\"\r\n                    :row-key=\"getRowKey\"\r\n                    @selection-change=\"handleChangeSelection\"\r\n                    >\r\n                    <el-table-column\r\n                    type=\"selection\"\r\n                    width=\"55\"\r\n                    align=\"center\"\r\n                    :reserve-selection=\"true\">\r\n                    </el-table-column>\r\n                    <el-table-column\r\n                    prop=\"createTime\"\r\n                    label=\"生成时间\"\r\n                    width=\"150\"\r\n                    >\r\n                    <template #header>\r\n                        <span :style=\"{'color':params.timeInterval ?'#e41d1d':''}\">生成时间</span>\r\n                        <el-popover  ref=\"setRemovePop\" placement=\"bottom-start\" width=\"auto\" trigger=\"click\" :popper-options=\"{ boundariesElement: 'viewport', removeOnDestroy: true }\">\r\n                            <div class=\"el-table-filter__checkbox-group\">\r\n                                <span class=\"demonstration\">时间区间：</span>\r\n                                <el-date-picker\r\n                                  v-model=\"params.timeInterval\"\r\n                                  type=\"daterange\"\r\n                                  :teleported=\"false\"\r\n                                  :editable=\"false\"\r\n                                  :clearable=\"false\"\r\n                                  start-placeholder=\"开始时间\"\r\n                                  end-placeholder=\"结束时间\"\r\n                                  value-format=\"YYYY-MM-DD HH:mm:ss\"\r\n                                />\r\n                            </div>\r\n                            <div class=\"el-table-filter__bottom\"><button :class=\"params.timeInterval ? '' : 'is-disabled'\"\r\n                                type=\"button\" @click=\"searchDate()\">确定</button><button type=\"button\" @click=\"resetDate()\">重置</button></div>\r\n                            <template #reference>\r\n                                <span class=\"el-table__column-filter-trigger\">\r\n                                    <el-icon>\r\n                                        <Search />\r\n                                    </el-icon>\r\n                                </span>\r\n                            </template>\r\n                          </el-popover>\r\n                    </template>\r\n                    </el-table-column>\r\n                    <el-table-column\r\n                    label=\"SQL详情\"\r\n                    prop=\"target\"\r\n                    show-overflow-tooltip\r\n                    >\r\n                    </el-table-column>\r\n                    <el-table-column\r\n                    label=\"指标分组\"\r\n                    prop=\"targetGroup\"\r\n                    show-overflow-tooltip\r\n                    width=\"200\"\r\n                    column-key=\"targetGroup\"\r\n                    :filters=\"targetGroup\"\r\n                    >\r\n                    </el-table-column>\r\n                    <el-table-column\r\n                    label=\"监控平台\"\r\n                    prop=\"platform\"\r\n                    width=\"200\"\r\n                    show-overflow-tooltip\r\n                    column-key=\"platform\"\r\n                    :filters=\"platform\"\r\n                    >\r\n                    </el-table-column>\r\n              </el-table>\r\n              <el-pagination\r\n                background\r\n                :pager-count=\"5\"\r\n                :total=\"totalIndex\"\r\n                @current-change=\"handleCurrentIndexChange\"\r\n                :current-page=\"currentIndex\" style=\"text-align: end;padding: 16px 0px 16px 16px;\"\r\n                @size-change=\"handleIndexSizeChange\"\r\n                :page-sizes=\"[20, 50, 100]\"\r\n                :page-size=\"pageSizeIndex\"\r\n                layout=\"->,total, sizes, prev, pager, next, jumper\"\r\n                >\r\n              </el-pagination>\r\n            </div>\r\n            <template v-slot:footer>\r\n                <span class=\"dialog-footer\">\r\n                    <el-button class=\"buttonColor\" @click=\"indexDialogVisible = false\">取 消</el-button>\r\n                    <el-button type=\"primary\" @click=\"submitForm()\">发 布</el-button>\r\n                </span>\r\n            </template>\r\n        </el-dialog>\r\n</div>\r\n</template>\r\n<script setup>\r\n    import { WarningFilled,Search } from '@element-plus/icons-vue'\r\n    import { watch,ref,reactive,onMounted,getCurrentInstance,nextTick } from 'vue';\r\n    import { ElMessage,ElMessageBox } from \"element-plus\";\r\n    const { proxy } = getCurrentInstance();\r\n                const updateForm = ref(null);\r\n                const themeButton = ref(localStorage.getItem('opengauss-theme'));\r\n                let isReadOnly = ref(false);\r\n                let isOneDelete = ref(0);\r\n                let isAllDelete = ref(true);\r\n                let dialogVisible = ref(false);\r\n                let indexDialogVisible = ref(false);\r\n                let setRemovePop = ref(null);\r\n                let current = ref(1);\r\n                let total = ref(0);\r\n                let pageSize = ref(20);\r\n                let currentIndex = ref(1);\r\n                let totalIndex = ref(0);\r\n                let pageSizeIndex = ref(20);\r\n                let platform = ref([]);\r\n                let targetGroup = ref([]);\r\n                let ruleForm = reactive({\r\n                    connectName:'',\r\n                    userName:'',\r\n                    password:'',\r\n                    port:'',\r\n                    ip:'',\r\n                    platform:'Prometheus',\r\n                    dataSourceId:''\r\n                });\r\n                let dataSourceId = reactive([]);\r\n                let jobIds = ref([]);\r\n                let disabledRelease = ref(true);\r\n                let tableData = ref([]);\r\n                let tableDataIndex = ref([]);\r\n                let params = reactive({\r\n                    timeInterval:null,\r\n                    platform:'',\r\n                    targetGroup:'',\r\n                    dataSourceId:'',\r\n                    isManagement:true\r\n                });\r\n                const rulesHost = reactive({\r\n                    connectName:[\r\n                        { required: true, message: '请输入实例名称', trigger: 'blur' },\r\n                        { pattern: /^[0-9A-Za-z_]{2,16}$/g, message: '连接名称只支持英文、下划线、数字组合2-16个字符' }],\r\n                    userName:[\r\n                        { required: true, message: '请输入只读用户', trigger: 'blur' },\r\n                        { min: 1, max: 100, message: '长度在 1 到 100 个字符', trigger: 'blur' }],\r\n                    password:[\r\n                        { required: true, message: '请输入登录密码', trigger: 'blur' },\r\n                        { min: 1, max: 100, message: '长度在 1 到 100 个字符', trigger: 'blur' }],\r\n                        ip:[\r\n                        { required: true, message: '请输入主机地址', trigger: 'blur' },\r\n                        { pattern: /^(\\d|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5])\\.(\\d|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5])\\.(\\d|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5])\\.(\\d|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5])$/, message: '只允许输入IP地址' }],\r\n                    port:[\r\n                        { required: true, message: '请输入主机端口', trigger: 'blur' },\r\n                        { pattern: /^((6[0-4]\\d{3}|65[0-4]\\d{2}|655[0-2]\\d|6553[0-5])|[0-5]?\\d{0,4})$/g, message: '只允许输入端口号' }]\r\n                });\r\n        onMounted(() => {\r\n            getFormData();\r\n            window.$wujie?.bus.$on('opengauss-theme-change', () => {\r\n                themeButton.value = localStorage.getItem('opengauss-theme');\r\n            })\r\n        });\r\n        watch(indexDialogVisible, (newName) => {\r\n            if(newName == false){\r\n                params.platform = '';\r\n                params.targetGroup = '';\r\n                params.timeInterval = null;\r\n                dataSourceId = [];\r\n                totalIndex.value = 0;\r\n                tableDataIndex.value = [];\r\n            }\r\n        });\r\n        watch(dialogVisible, (newName) => {\r\n            if(newName == false){\r\n                isReadOnly.value = false;\r\n            }\r\n        });\r\n         // List Filter Status\r\n         const filterChange = (filter) => {\r\n            if(filter['platform']){\r\n            // Modify the parameters passed to the back-end interface and call the interface again\r\n                params.platform = filter.platform.join(',')\r\n                checkSql();\r\n            }\r\n            else{\r\n                params.targetGroup = filter.targetGroup.join(',')\r\n                checkSql();\r\n            }\r\n        };\r\n        const searchDate = () => {\r\n            if(params.timeInterval){\r\n                checkSql();\r\n                setRemovePop.value.hide();\r\n            }\r\n        }\r\n        const resetDate = () => {\r\n            params.timeInterval = null;\r\n            checkSql();\r\n        }\r\n        const unique = (arr) => {\r\n            const res = new Map();\r\n            return arr.filter((arr) => !res.has(arr.jobId) && res.set(arr.jobId, 1))\r\n        }\r\n        // Query host list\r\n        const getFormData = () => {\r\n        proxy.$http.get('/data/list/source/'+current.value+'/'+pageSize.value).then(res=>{\r\n            if(res.data.code == 200){\r\n                tableData.value = res.data.data;\r\n                total.value = res.data.total;\r\n                if(res.data.sql_num != 0){\r\n                    disabledRelease.value = false;\r\n                }\r\n            } else {\r\n                ElMessage.warning(\"查询失败\");\r\n            }\r\n            }).catch(()=>{\r\n                ElMessage.warning(\"查询失败\");\r\n        })\r\n        };\r\n        // Modify host information\r\n        const detail = (row) => {\r\n            if(row.targets.length > 0){\r\n                isReadOnly.value = true;\r\n            }\r\n            dialogVisible.value = true;\r\n            ruleForm.connectName = row.connectName;\r\n            ruleForm.userName = row.userName;\r\n            ruleForm.port = row.port;\r\n            ruleForm.ip = row.ip;\r\n            ruleForm.dataSourceId = row.dataSourceId;\r\n        };\r\n        const handleCurrentChange = (val) => {\r\n            current.value = val;\r\n            getFormData();\r\n        };\r\n        const handleSizeChange = (val) => {\r\n            pageSize.value = val;\r\n            getFormData();\r\n        };\r\n        const handleIndexSizeChange = (val) => {\r\n            pageSizeIndex.value = val;\r\n        };\r\n        const handleCurrentIndexChange = (val) => {\r\n            currentIndex.value = val;\r\n        };\r\n        const handleChangeSelection = () => {\r\n        };\r\n        const getRowKey = (row) => {\r\n            return row.jobId;\r\n        };\r\n        // Query Indicator List\r\n        const checkSql = () => {\r\n        proxy.$http.post('/monitor/job/list/'+currentIndex.value+'/'+pageSizeIndex.value,JSON.stringify(params)).then(res=>{\r\n            if(res.data.code == 200){\r\n                tableDataIndex.value = res.data.data.tableData;\r\n                totalIndex.value = res.data.total;\r\n                targetGroup.value = res.data.data.targetGroup;\r\n                platform.value = res.data.data.platForm;\r\n                res.data.data.tableData.filter(item => {\r\n                    if(item.isPbulish && !params.platform && !params.targetGroup && !params.timeInterval){\r\n                        nextTick(()=>{\r\n                            proxy.$refs[\"indexTable\"].toggleRowSelection(item,true);\r\n                        })\r\n                    }            \r\n                });\r\n            } else {\r\n                ElMessage.warning(\"查询失败\");\r\n            }\r\n            }).catch(()=>{\r\n                ElMessage.warning(\"查询失败\");\r\n        })\r\n        };\r\n        // Publish indicators individually or in batch\r\n        const updateRow = (rows) => {\r\n            proxy.$unFocus();\r\n            if(proxy.$refs[\"table\"].getSelectionRows().length == 0 && rows == ''){\r\n                ElMessage.warning(\"请至少选中一台主机信息\"); \r\n                return false;\r\n            }\r\n            indexDialogVisible.value = true;\r\n            if(proxy.$refs[\"table\"].getSelectionRows().length > 0 && rows == ''){\r\n                proxy.$refs[\"table\"].getSelectionRows().filter(item => {            \r\n                    dataSourceId.push(item.dataSourceId)\r\n                });\r\n                if(proxy.$refs[\"table\"].getSelectionRows().length == 1){\r\n                    params.dataSourceId = proxy.$refs[\"table\"].getSelectionRows().dataSourceId;\r\n                } else {\r\n                    params.dataSourceId = '';\r\n                }\r\n            } else {\r\n                dataSourceId.push(rows.dataSourceId);\r\n                params.dataSourceId = rows.dataSourceId;\r\n            }\r\n            checkSql();\r\n        };\r\n        // Save host information\r\n        const updateHost = (formName) => {\r\n            proxy.$refs[formName].validate((valid) => {\r\n            if (valid) {\r\n                proxy.$http.post('/data/update/config', JSON.stringify(ruleForm)).then(res=>{\r\n                    if(res.data.code == 200){\r\n                        dialogVisible.value = false;\r\n                        getFormData();\r\n                        ElMessage.success(\"保存成功\")\r\n                    } else if(res.data.code == 400){\r\n                        ElMessage.warning(res.data.message);\r\n                    }\r\n                }).catch(()=>{\r\n                    ElMessage.warning(\"保存失败\")\r\n                })\r\n            } else {\r\n                return false;\r\n            }\r\n            });\r\n        };\r\n        // Delete hosts individually or in bulk\r\n        const deleteRow = (Index, data,rows) => {\r\n            proxy.$unFocus();\r\n            let tips,arrayData = [];\r\n            if(rows){\r\n                if(proxy.$refs[\"table\"].getSelectionRows().length == 0){\r\n                    ElMessage.warning(\"请至少选中一台主机信息\"); \r\n                    return false;\r\n                }\r\n                proxy.$refs[\"table\"].getSelectionRows().filter(item => {            \r\n                    arrayData.push(item.dataSourceId)\r\n                    if(item.targets.length > 0){\r\n                        isAllDelete.value = false\r\n                    }    \r\n                });\r\n                if(!isAllDelete.value){\r\n                    tips = \"该主机下存在已发布指标, 是否继续删除?\"\r\n                } else{\r\n                    tips = \"确认批量删除多台主机, 是否继续?\"\r\n                }\r\n            } else {\r\n                isOneDelete.value = data[Index].targets.length;\r\n                arrayData = [data[Index].dataSourceId];\r\n                if(isOneDelete.value > 0){\r\n                    tips = \"该主机下存在已发布指标, 是否继续删除?\"\r\n                } else{\r\n                    tips = \"确认删除该主机, 是否继续?\"\r\n                }\r\n            }\r\n            ElMessageBox.confirm(tips, \"提示\", {\r\n                    confirmButtonText: \"确定\",\r\n                    cancelButtonText: \"取消\",\r\n                    type: \"warning\"\r\n                })\r\n                .then(() => {\r\n                    proxy.$http.post('/data/delete', JSON.stringify(arrayData)).then(res=>{\r\n                                if(res.data.code == 200){\r\n                                    ElMessage.success(\"删除成功\");\r\n                                    getFormData();\r\n                                } else if(res.data.code == 400){\r\n                                    ElMessage.warning(res.data.message);\r\n                                }\r\n                                isAllDelete.value = true;\r\n                                isOneDelete.value = 0;\r\n                            }).catch(()=>{\r\n                                ElMessage.warning(\"删除失败\");\r\n                                isAllDelete.value = true;\r\n                                isOneDelete.value = 0;\r\n                            })\r\n                })\r\n                .catch(() => {\r\n                    ElMessage({\r\n                        type: \"info\",\r\n                        message: \"已取消删除\"\r\n                    });\r\n                });\r\n        };\r\n        // Indicator information for unbinding with host\r\n        const deleteRowIndex = (Index, data) => {\r\n            ElMessageBox.confirm(\"确认删除该指标, 是否继续?\", \"提示\", {\r\n                    confirmButtonText: \"确定\",\r\n                    cancelButtonText: \"取消\",\r\n                    type: \"warning\"\r\n                })\r\n                .then(() => {\r\n                    let param = {\r\n                        dataSourceId:data.dataSourceId,\r\n                        jobIds:[data.targets[Index].jobId]\r\n                    }\r\n                    proxy.$http.post('/monitor/job/single/publish/pause', JSON.stringify(param)).then(res=>{\r\n                        if(res.data.code == 200){\r\n                            ElMessage.success(\"删除成功\");\r\n                            getFormData();\r\n                        } else if(res.data.code == 400){\r\n                            ElMessage.warning(res.data.message);\r\n                        }\r\n                    }).catch(()=>{\r\n                        ElMessage.warning(\"删除失败\");\r\n                    })\r\n                })\r\n                .catch(() => {\r\n                    ElMessage({\r\n                        type: \"info\",\r\n                        message: \"已取消删除\"\r\n                    });\r\n                });\r\n                proxy.$unFocus();\r\n        };\r\n        // Save Publication\r\n        const submitForm = () => {\r\n            if(unique(proxy.$refs[\"indexTable\"].getSelectionRows()).length == 0){\r\n                ElMessage.warning(\"请至少选中一条指标\"); \r\n                return false;\r\n            }\r\n            unique(proxy.$refs[\"indexTable\"].getSelectionRows()).filter(item => {            \r\n                jobIds.value.push(item.jobId)\r\n            });\r\n            let param = {\r\n                dataSourceId:dataSourceId,\r\n                jobIds:jobIds.value\r\n            }\r\n            proxy.$http.post('/monitor/job/batch/publish', JSON.stringify(param)).then(res=>{\r\n                if(res.data.code == 200){\r\n                    ElMessage.success(\"发布成功\");\r\n                    indexDialogVisible.value = false;\r\n                    jobIds.value = [],\r\n                    dataSourceId = [];\r\n                    getFormData();\r\n                } else if(res.data.code == 400){\r\n                    jobIds.value = [];\r\n                    ElMessage.warning(res.data.message);\r\n                } \r\n            }).catch(()=>{\r\n                ElMessage.warning(\"发布失败\");\r\n            })\r\n        };\r\n</script>\r\n","import script from \"./IndexRelease.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./IndexRelease.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__"," <!-- * Copyright (c) 2020 Huawei Technologies Co.,Ltd.\n *\n * openGauss is licensed under Mulan PSL v2.\n * You can use this software according to the terms and conditions of the Mulan PSL v2.\n * You may obtain a copy of Mulan PSL v2 at:\n *\n *          http://license.coscl.org.cn/MulanPSL2\n *\n * THIS SOFTWARE IS PROVIDED ON AN \"AS IS\" BASIS, WITHOUT WARRANTIES OF ANY KIND,\n * EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,\n * MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.\n * See the Mulan PSL v2 for more details. -->\n<template>\n<div class=\"layout\">\n            <el-tabs v-model='activeName' @tab-click=\"handleClick\">\n            <el-tab-pane label='生成指标' name='first' style=\"font-size:16px;\">\n            <header id=\"header\">\n                <el-card shadow=\"never\">\n                    <el-row class=\"rowColor\">\n                        <el-col :span=\"1\" style=\"text-align: center;padding-top: 16px;\">\n                            <el-icon style=\"font-size:20px\"><WarningFilled /></el-icon>\n                        </el-col>\n                        <el-col :span=\"23\" style=\"font-size: 14px;\">\n                            <p class=\"tipck\">监控平台：选择对应的监控平台，当前支持三种：Prometheus、Zabbix、Nagios</p>\n                            <p class=\"tipck\">指标分组：可以手动输入或者选择历史分组，分组可方便管理与发布</p>\n                            <p class=\"tipck\">采集间隔：对指标数据采集间隔时间设置</p>\n                            <p class=\"tipck\">实例名称：在生成指标时，会在所选实例上进行权限与可执行性校验</p>\n                            <p class=\"tipck\">SQL语句：输入需要监控的SQL语句，会进行权限校验与监控分析</p>\n                            <p class=\"tipck\">生成指标：根据不同监控平台，将已通过检验的SQL语句生成对应监控平台的指标文件</p>\n                        </el-col>\n                    </el-row>\n                </el-card>\n            </header>\n            <div id=\"layout-body\">\n                <main id=\"main\">\n                    <el-form :model=\"ruleForm\" :label-position=\"'left'\" :rules=\"rules\" ref=\"openForm\" label-width=\"\" class=\"demo-ruleForm\"\n                    style=\"margin: 16px 0px 0px 0px;\">\n                        <el-row>\n                            <el-col :span=\"7\">\n                                  <el-form-item label=\"监控平台\" prop=\"platform\">\n                                    <el-radio-group v-model=\"ruleForm.platform\">\n                                    <el-radio-button label=\"Prometheus\"></el-radio-button>\n                                    <el-radio-button label=\"Zabbix\"></el-radio-button>\n                                    <el-radio-button label=\"Nagios\"></el-radio-button>\n                                    </el-radio-group>\n                                </el-form-item>\n                            </el-col>\n                            <el-col :span=\"6\">\n                                  <el-form-item label=\"指标分组\" prop=\"targetGroup\">\n                                    <el-select\n                                        style=\"width:230px\"\n                                        v-model=\"ruleForm.targetGroup\"\n                                        filterable\n                                        allow-create\n                                        default-first-option\n                                        @blur=\"productSelect\"\n                                        :teleported=\"false\"\n                                        placeholder=\"请输入或选择指标分组\">\n                                        <el-option\n                                        v-for=\"item in jobOptions\"\n                                        :key=\"item\"\n                                        :label=\"item\"\n                                        :value=\"item\">\n                                        <span>{{item}}</span>\n                                        <span style=\"float: right;\" @click.stop=\"handleDeleteTag(item)\" ><div style=\"padding-left: 5px;padding-right: 5px\"><el-icon><Close /></el-icon></div></span>\n                                        </el-option>\n                                    </el-select>\n                                </el-form-item>\n                            </el-col>\n                            <el-col :span=\"6\">\n                                <el-form-item label=\"采集间隔\" prop=\"num\">\n                                    <el-input style=\"width:120px\" v-model=\"ruleForm.num\" v-on:change=\"change\"></el-input>\n                                    <el-select v-model=\"ruleForm.timeType\" :teleported=\"false\" style=\"width:120px;\" prop=\"timeType\"  placeholder=\"\">\n                                        <el-option\n                                          v-for=\"item in options\"\n                                          :key=\"item.value\"\n                                          :label=\"item.label\"\n                                          :value=\"item.value\">\n                                        </el-option>\n                                    </el-select>\n                                </el-form-item>\n                            </el-col>\n                            <el-col :span=\"5\">\n                                <el-form-item label=\"实例名称\" prop=\"dataSourceId\" >\n                                    <el-select v-model=\"ruleForm.dataSourceId\" :teleported=\"false\" style=\"width:180px;\" prop=\"dataSourceId\"  placeholder=\"\">\n                                        <el-option\n                                          v-for=\"item in hostOptions\"\n                                          :key=\"item.dataSourceId\"\n                                          :label=\"item.connectName\"\n                                          :value=\"item.dataSourceId\">\n                                        </el-option>\n                                    </el-select>\n                                </el-form-item>\n                            </el-col>\n                        </el-row>\n                        <el-row>\n                            <el-col :span=\"24\">\n                                <el-form-item label=\"SQL语句\" prop=\"target\" >\n                                    <el-input type=\"textarea\" :rows=\"21\" v-model=\"ruleForm.target\" v-on:change=\"changeSql\"></el-input>\n                                </el-form-item>\n                            </el-col>\n                        </el-row>\n                    </el-form>\n                </main>\n                <footer id=\"footer\">\n                    <el-button size=\"large\" type=\"primary\" :disabled=\"disabledFlg\" @click=\"debounceMethods(submitForm,1000,'openForm')\">生成指标</el-button>\n                </footer>\n            </div>\n            </el-tab-pane>\n            <el-tab-pane label='指标管理' name='second' style=\"font-size:16px;\">\n            <div id=\"layout-body\">\n                <el-card shadow=\"never\" style=\"margin-bottom: 16px;\">\n                    <el-row class=\"rowColor\">\n                        <el-col :span=\"1\" style=\"text-align: center;padding-top: 16px;\">\n                            <el-icon style=\"font-size:20px\"><WarningFilled /></el-icon>\n                        </el-col>\n                        <el-col :span=\"23\" style=\"font-size: 14px;\">\n                            <p class=\"tipck\">修改：对已生成指标文件数据进行修改</p>\n                            <p class=\"tipck\">删除：删除指标文件数据及相应的配置文件</p>\n                            <p class=\"tipck\" style=\"font-style:italic;\">注：指标管理中包含150条默认指标，每个监控平台（Prometheus\\Zabbix\\Nagios）各50条，不支持对默认指标的删除操作</p>\n                        </el-col>\n                    </el-row>\n                </el-card>\n                    <el-table\n                    :data=\"tableData\"\n                    style=\"width: 100%\"\n                    id=\"indexId\"\n                    :header-cell-style=\"{fontWeight:'normal',textAlign: 'center'}\"\n                    :cell-style=\"{padding: '4px 0px'}\"\n                    >\n                    <el-table-column\n                    prop=\"jobName\"\n                    label=\"SQLID\"\n                    width=\"80\"\n                    align=\"center\">\n                    </el-table-column>\n                    <el-table-column\n                    label=\"SQL详情\"\n                    prop=\"target\"\n                    show-overflow-tooltip\n                    align=\"left\"\n                    >\n                    <template v-slot=\"scope\">\n                        <a @click=\"detail(scope.row)\" style=\"cursor:pointer;font-size: 14px;\">{{\n                        scope.row.target\n                        }}</a>\n                    </template>\n                    </el-table-column>\n                    <el-table-column\n                    label=\"指标分组\"\n                    prop=\"targetGroup\"\n                    show-overflow-tooltip\n                    width=\"120\"\n                    align=\"center\"\n                    >\n                    </el-table-column>\n                    <el-table-column\n                    label=\"监控平台\"\n                    prop=\"platform\"\n\n                    width=\"100\"\n                    align=\"center\"\n                    >\n                    </el-table-column>\n                    <el-table-column\n                    prop=\"createTime\"\n                    label=\"生成时间\"\n                    width=\"150\"\n                    align=\"center\">\n                    </el-table-column>\n                    <el-table-column\n                    label=\"操作\"\n                    width=\"120\"\n                    align=\"center\">\n                    <template v-slot=\"scope\">\n                        <el-button\n                            @click.prevent=\"updateRow(scope.row)\"\n                            link type=\"primary\"\n                            size=\"small\">\n                            修改\n                        </el-button>\n                        <el-button\n                            @click.prevent=\"deleteRow(scope.$index, tableData)\"\n                            link type=\"primary\"\n                            size=\"small\" :disabled=\"scope.row.targetGroup == 'system_default'\">\n                            删除\n                        </el-button>\n                    </template>\n                    </el-table-column>\n              </el-table>\n              <el-pagination\n                background\n                :pager-count=\"5\"\n                :total=\"total\"\n                @current-change=\"handleCurrentChange\"\n                :current-page=\"current\" style=\"text-align: end;padding: 16px 0px 16px 16px;\"\n                @size-change=\"handleSizeChange\"\n                :page-sizes=\"[20, 50, 100]\"\n                :page-size=\"pageSize\"\n                layout=\"->,total, sizes, prev, pager, next, jumper\"\n                >\n              </el-pagination>\n            </div>\n            </el-tab-pane>\n        </el-tabs>\n        <el-dialog\n            title=\"SQL详情\"\n            v-model =\"dialogVisible\"\n            width=\"50%\"\n            top=\"25vh\"\n            destroy-on-close>\n            <div style=\"height:340px;overflow-y: auto;\">\n                <span>{{sqlContent}}</span>\n            </div>\n            <template v-slot:footer>\n                <span class=\"dialog-footer\">\n                </span>\n            </template>\n        </el-dialog>\n        <el-dialog\n            :title=\"updateRuleForm.targetGroup != 'system_default'?'指标修改':'默认指标修改'\"\n            v-model =\"indexDialogVisible\"\n            width=\"80%\"\n            top=\"8vh\"\n            class=\"indexClass\"\n            destroy-on-close\n            :close-on-click-modal = false>\n            <div style=\"height:100%;overflow-y: auto;\">\n                <el-form :model=\"updateRuleForm\" :label-position=\"'left'\" :rules=\"rules\" ref=\"updateForm\" label-width=\"auto\" class=\"demo-ruleForm\"\n                        style=\"margin: 16px 0px 0px 0px;\">\n                            <el-row>\n                                <el-col :span=\"7\">\n                                    <el-form-item label=\"监控平台\" prop=\"platform\">\n                                        <el-popover\n                                        placement=\"top-start\"\n                                        title=\"\"\n                                        :width=\"200\"\n                                        trigger=\"hover\"\n                                        :teleported=\"false\"\n                                        :content=\"updateRuleForm.targetGroup == 'system_default' ? '默认指标不允许修改监控平台' : '已发布的指标不允许修改监控平台'\"\n                                        :disabled=\"updateRuleForm.isCanUpdate && updateRuleForm.targetGroup != 'system_default'\"\n                                      >\n                                        <template #reference>\n                                            <el-radio-group v-model=\"updateRuleForm.platform\" :disabled=\"!updateRuleForm.isCanUpdate || updateRuleForm.targetGroup == 'system_default'\">\n                                                <el-radio-button label=\"Prometheus\"></el-radio-button>\n                                                <el-radio-button label=\"Zabbix\"></el-radio-button>\n                                                <el-radio-button label=\"Nagios\"></el-radio-button>\n                                            </el-radio-group>\n                                        </template>\n                                      </el-popover>\n                                    </el-form-item>\n                                </el-col>\n                                <el-col :span=\"6\">\n                                    <el-form-item label=\"指标分组\" prop=\"targetGroup\">\n                                        <el-select\n                                            style=\"width:250px\"\n                                            v-model=\"updateRuleForm.targetGroup\"\n                                            :disabled=\"updateRuleForm.targetGroup == 'system_default'\"\n                                            filterable\n                                            allow-create\n                                            default-first-option\n                                            @blur=\"productSelectDialog\"\n                                            :teleported=\"false\"\n                                            placeholder=\"请输入或选择指标分组\">\n                                            <el-option\n                                            v-for=\"(item,Index) in jobOptions\"\n                                            :key=\"Index\"\n                                            :label=\"item\"\n                                            :value=\"item\">\n                                            <span>{{item}}</span>\n                                            <span style=\"float: right;\" @click.stop=\"handleDeleteTag(jobOptions[Index])\" ><div style=\"padding-left: 5px;padding-right: 5px\"><el-icon><Close /></el-icon></div></span>\n                                            </el-option>\n                                        </el-select>\n                                    </el-form-item>\n                                </el-col>\n                                <el-col :span=\"6\">\n                                    <el-form-item label=\"采集间隔\" prop=\"num\">\n                                        <el-input style=\"width:120px\" v-model=\"updateRuleForm.num\" v-on:change=\"change\"></el-input>\n                                        <el-select v-model=\"updateRuleForm.timeType\" :teleported=\"false\" style=\"width:120px;\" prop=\"timeType\"  placeholder=\"\">\n                                            <el-option\n                                            v-for=\"item in options\"\n                                            :key=\"item.value\"\n                                            :label=\"item.label\"\n                                            :value=\"item.value\">\n                                            </el-option>\n                                        </el-select>\n                                    </el-form-item>\n                                </el-col>\n                                <el-col :span=\"5\" v-if=\"updateRuleForm.targetGroup != 'system_default'\">\n                                    <el-form-item label=\"实例名称\" prop=\"dataSourceId\" >\n                                        <el-select v-model=\"updateRuleForm.dataSourceId\" :teleported=\"false\" style=\"width:180px;\" prop=\"dataSourceId\"   placeholder=\"\">\n                                            <el-option\n                                              v-for=\"item in hostOptions\"\n                                              :key=\"item.dataSourceId\"\n                                              :label=\"item.connectName\"\n                                              :value=\"item.dataSourceId\">\n                                            </el-option>\n                                        </el-select>\n                                    </el-form-item>\n                                </el-col>\n                            </el-row>\n                            <el-row>\n                                <el-col :span=\"24\">\n                                    <el-form-item label=\"SQL语句\" prop=\"target\" >\n                                        <el-input type=\"textarea\" :rows=\"26\" v-model=\"updateRuleForm.target\" v-on:change=\"changeSql\" :disabled=\"updateRuleForm.targetGroup == 'system_default'\"></el-input>\n                                    </el-form-item>\n                                </el-col>\n                            </el-row>\n                </el-form>\n            </div>\n            <template v-slot:footer>\n                <span class=\"dialog-footer\">\n                    <el-button class=\"buttonColor\" @click=\"indexDialogVisible = false\">取 消</el-button>\n                    <el-button type=\"primary\" @click=\"debounceMethods(submitForm,1000,'updateForm')\">保 存</el-button>\n                </span>\n            </template>\n        </el-dialog>\n</div>\n</template>\n<script setup>\n    import { WarningFilled,Close } from '@element-plus/icons-vue';\n    import { watch,ref,reactive,onMounted,getCurrentInstance} from 'vue';\n    import { ElMessage,ElMessageBox } from \"element-plus\";\n    import { useRouter } from 'vue-router';\n                const router = useRouter();\n                const { proxy } = getCurrentInstance();\n                const openForm = ref(null);\n                const updateForm = ref(null);\n                let themeTableClass = ref(localStorage.getItem('opengauss-theme'));\n                let dialogVisible = ref(false);\n                let indexDialogVisible = ref(false);\n                let sqlContent = ref('');\n                let activeName = ref(localStorage.getItem(\"activeNameFile\")?localStorage.getItem(\"activeNameFile\"):\"first\");\n                let current = ref(1);\n                let total = ref(0);\n                let pageSize = ref(20);\n                let disabledFlg = ref(false);\n                let debounceTimer = ref(null);\n                let tableData = ref([]);\n                let jobOptions = ref([]);\n                let ruleForm = reactive({\n                    jobId:null,\n                    isFalse:false,\n                    target:'',\n                    num:5,\n                    timeType:'second',\n                    targetGroup:'',\n                    platform:'Prometheus',\n                    dataSourceId:''\n                });\n                const updateRuleForm = reactive({data:{\n                    jobId:null,\n                    isFalse:false,\n                    target:'',\n                    num:5,\n                    timeType:'second',\n                    targetGroup:'',\n                    platform:'Prometheus',\n                    dataSourceId:'',\n                    isCanUpdate:true\n                }});\n                const hostOptions= ref([]);\n                const options = reactive([{\n                    value: 'second',\n                    label: '秒'\n                    },{\n                    value: 'minute',\n                    label: '分'\n                    },{\n                    value: 'hour',\n                    label: '时'\n                    },{\n                    value: 'day',\n                    label: '日'\n                    },{\n                    value: 'week',\n                    label: '周'\n                    },{\n                    value: 'month',\n                    label: '月'\n                    },{\n                    value: 'year',\n                    label: '年'\n                    }]);\n                const rules = reactive({\n                    platform:[\n                        {required:true,message:'请选择监控平台',trigger:'blur'}],\n                    targetGroup:[\n                        {required:true,message:'请输入或选择指标分组',trigger:'blur'}],\n                    target:[\n                        {required:true,message:'请输入SQL语句',trigger:'blur'}],\n                    num:[\n                        {required:true,message:'请输入采集间隔时间',trigger:'blur'},\n                        {pattern: /^[0-9]{1,3}$/,message: \"只能输入1~3位数字\",trigger: \"blur\"}],\n                    dataSourceId:[\n                        {required:true,message:'请选择实例名称',trigger:'blur'}],\n                });\n        onMounted(() => {\n                getJobs();\n                isZabbixData();\n                hostData();\n            if(activeName.value == 'second'){\n                checkSql();\n            }\n            window.$wujie?.bus.$on('opengauss-theme-change', () => {\n                console.log('fileGeneration')\n                themeTableClass.value = localStorage.getItem('opengauss-theme');\n            })\n        });\n        watch(activeName, (newName) => {\n            localStorage.setItem(\"activeNameFile\",newName);\n        });\n        watch(() => router.currentRoute.value.path,() => {\n            localStorage.removeItem(\"activeNameFile\")\n        })\n        const hostData = () => {\n            proxy.$http.get('/data/source/name').then(res=>{\n                    if(res.data.code == 200){\n                        if(res.data.data){\n                            hostOptions.value = res.data.data;\n                        }\n                    }\n                }).catch(()=>{\n                    ElMessage.warning(\"请求失败\")\n                })\n        };\n        const productSelect = (e) => {\n        let value = e.target.value; \n            if(value) { \n                ruleForm.targetGroup = value;\n            }\n        };\n        const productSelectDialog = (e) => {\n        let value = e.target.value; \n            if(value) { \n                updateRuleForm.targetGroup = value\n            }\n        };\n        // Determine whether the configuration information already exists for zabbix\n        const isZabbixData = () => {\n            proxy.$http.get('/data/zabbix/config').then(res=>{\n                    if(res.data.code == 200){\n                        if(res.data.data && res.data.data.ip){\n                            ruleForm.platform = 'Zabbix';\n                        }\n                    } else if(res.data.code == 400){\n                        return false;\n                    }\n                }).catch(()=>{\n                    ElMessage.warning(\"请求失败\")\n                })\n        };\n        // tabs click event\n        const handleClick = (tab) => {\n            if(tab.props.name == 'second'){\n                checkSql();\n            }\n        };\n        // button throttle\n        const debounceMethods = (func,time,...args) =>{\n            let context = this;\n            if (debounceTimer.value){\n                return\n            }\n            let callNow = !debounceTimer.value;\n            debounceTimer.value = setTimeout(() => {\n                debounceTimer.value = null;\n            },time)\n            if(callNow){\n                func.apply(context,args)\n            }\n        };\n        // Get indicator group list information\n        const getJobs = () => {\n            proxy.$http.get('/monitor/job/group').then(res=>{\n                    if(res.data.code == 200){\n                        if(window.localStorage.getItem('jobOptions') !== null){\n                            jobOptions.value = JSON.parse(window.localStorage.getItem('jobOptions'));\n                        } else {\n                            jobOptions.value = res.data.data;\n                            window.localStorage.setItem('jobOptions',JSON.stringify(jobOptions.value));\n                        }\n                    } else if(res.data.code == 400){\n                        return false;\n                    }\n                }).catch(()=>{\n                    ElMessage.warning(\"指标分组查询失败\")\n                })\n        };\n        // SQL Details\n        const detail = (row) => {\n            dialogVisible.value = true;\n            sqlContent.value = row.target;\n        };\n        // Delete the group information of front-end cache\n        const handleDeleteTag = (tag) => {\n            jobOptions.value = JSON.parse(window.localStorage.getItem('jobOptions'));\n            jobOptions.value.splice((jobOptions.value).indexOf(tag), 1);\n            window.localStorage.setItem('jobOptions',JSON.stringify(jobOptions.value));\n        };\n        const handleCurrentChange = (val) => {\n            current.value = val;\n            checkSql();\n        };\n        const handleSizeChange = (val) => {\n            pageSize.value = val;\n            checkSql();\n        };\n        // Query Indicator List\n        const checkSql = () => {\n        proxy.$http.post('/monitor/job/list/'+current.value+'/'+pageSize.value,{}).then(res=>{\n            if(res.data.code == 200){\n                tableData.value = res.data.data.tableData;\n                total.value = res.data.total;\n            } else {\n                ElMessage.warning(\"查询失败\");\n            }\n            }).catch(()=>{\n                ElMessage.warning(\"查询失败\");\n        })\n        };\n        // Modify indicator information\n        const updateRow = (rows) => {\n            indexDialogVisible.value = true;\n            Object.assign(updateRuleForm, rows)\n        };\n        // Delete indicator information\n        const deleteRow = (Index, data) => {\n            let tips;\n            proxy.$http.post('/monitor/job/check', JSON.stringify([data[Index].jobId])).then(res=>{\n                        if(res.data.code == 200 && res.data.message){\n                            tips = res.data.message;\n                        } else {\n                            tips = \"确认删除该指标, 是否继续?\";\n                        }\n                        ElMessageBox.confirm(tips, \"提示\", {\n                            confirmButtonText: \"确定\",\n                            cancelButtonText: \"取消\",\n                            type: \"warning\"\n                            })\n                            .then(() => {\n                                proxy.$http.post('/monitor/job/delete', JSON.stringify([data[Index].jobId])).then(res=>{\n                                    if(res.data.code == 200){\n                                        ElMessage.success(\"删除成功\");\n                                        checkSql();\n                                    } else if(res.data.code == 400){\n                                        ElMessage.warning(res.data.message);\n                                    }\n                                }).catch(()=>{\n                                    ElMessage.warning(\"删除失败\");\n                                })\n                            })\n                            .catch(() => {\n                                ElMessage({\n                                    type: \"info\",\n                                    message: \"已取消删除\"\n                                });\n                            });\n                    }).catch(()=>{\n                        ElMessage.warning(\"查询失败\");\n                    })\n                proxy.$unFocus();\n        };\n        // Monitoring interval time input box\n        const change = (value) => {\n            if (value == 0) {\n              disabledFlg.value = true;\n            } else {\n              disabledFlg.value = false;\n            }\n        };\n        // Monitor sql input box\n        const changeSql = () => {\n            if(ruleForm.num != 0){\n                disabledFlg.value = false;\n            } else{\n                ElMessage.warning(\"采集间隔时间不能为0\");\n            }\n        };\n        // makefile\n        const submitForm = (formName) => {\n            proxy.$refs[formName].validate((valid) => {\n            if (valid) {\n                let formData,url;\n                if(activeName.value == 'first'){\n                   formData =  ruleForm;\n                   url = '/monitor/job/create'\n                } else {\n                   formData = updateRuleForm;\n                    url = '/monitor/job/update'\n                }\n                proxy.$http.post(url, JSON.stringify(formData)).then(res=>{\n                    if(res.data.code == 200){\n                        disabledFlg.value = true;\n                        ruleForm.jobId = '';\n                        indexDialogVisible.value = false;\n                        if(activeName.value == 'first'){\n                            ElMessage.success(\"生成成功\");\n                        } else {\n                            ElMessage.success(\"修改成功\");\n                        }\n                        jobOptions.value = JSON.parse(window.localStorage.getItem('jobOptions'));\n                        if((jobOptions.value).indexOf(formData.targetGroup) == -1){\n                            (jobOptions.value).unshift(formData.targetGroup);\n                        }\n                        window.localStorage.setItem('jobOptions',JSON.stringify(jobOptions.value));\n                        checkSql();\n                    } else if(res.data.code == 300){\n                        if(res.data.err_message){\n                            ElMessage({\n                                showClose: true,\n                                duration:0,\n                                message: res.data.err_message,\n                                type: 'warning'\n                            })\n                        }\n                    } else if(res.data.code == 400){\n                        ElMessage.warning(res.data.message);\n                    } else if(res.data.code == 600){\n                        ElMessageBox.confirm(\"该SQL可能无法生成指标，是否强制执行?\", \"提示\", {\n                            confirmButtonText: \"确定\",\n                            cancelButtonText: \"取消\",\n                            type: \"warning\"\n                        })\n                        .then(() => {\n                            ruleForm.isFalse = true;\n                            proxy.$http.post('/monitor/job/create', JSON.stringify(ruleForm,)).then(res=>{\n                                if(res.data.code == 200){\n                                    ruleForm.isFalse = false;\n                                    indexDialogVisible.value = false;\n                                    ElMessage.success(\"生成成功\");\n                                    jobOptions.value = JSON.parse(window.localStorage.getItem('jobOptions'));\n                                    if((jobOptions.value).indexOf(formData.targetGroup) == -1){\n                                        (jobOptions.value).unshift(formData.targetGroup);\n                                    }\n                                    window.localStorage.setItem('jobOptions',JSON.stringify(jobOptions.value));\n                                    checkSql();\n                                }\n                            }).catch(()=>{\n                                ruleForm.isFalse = false;\n                                ElMessage.warning(\"生成失败\");\n                            })\n                        })\n                        .catch(() => {\n                            ElMessage({\n                                type: \"info\",\n                                message: \"已取消生成\"\n                            });\n                        });\n                    }\n                }).catch(()=>{\n                    ElMessage.warning(\"生成失败\");\n                })\n            } else {\n                return false;\n            }\n            });\n        }\n</script>\n","import script from \"./fileGeneration.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./fileGeneration.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["proxy","getCurrentInstance","updateForm","ref","themeButton","localStorage","getItem","isReadOnly","isOneDelete","isAllDelete","dialogVisible","indexDialogVisible","setRemovePop","current","total","pageSize","currentIndex","totalIndex","pageSizeIndex","platform","targetGroup","ruleForm","reactive","connectName","userName","password","port","ip","dataSourceId","jobIds","disabledRelease","tableData","tableDataIndex","params","timeInterval","isManagement","rulesHost","required","message","trigger","pattern","min","max","onMounted","getFormData","window","$wujie","bus","$on","value","watch","newName","filterChange","filter","join","checkSql","searchDate","hide","resetDate","unique","arr","res","Map","has","jobId","set","$http","get","then","data","code","sql_num","ElMessage","catch","detail","row","targets","length","handleCurrentChange","val","handleSizeChange","handleIndexSizeChange","handleCurrentIndexChange","handleChangeSelection","getRowKey","post","JSON","stringify","platForm","item","isPbulish","nextTick","$refs","toggleRowSelection","updateRow","rows","$unFocus","getSelectionRows","push","updateHost","formName","validate","valid","deleteRow","Index","tips","arrayData","ElMessageBox","confirmButtonText","cancelButtonText","type","deleteRowIndex","param","submitForm","__exports__","router","useRouter","openForm","themeTableClass","sqlContent","activeName","disabledFlg","debounceTimer","jobOptions","isFalse","target","num","timeType","updateRuleForm","isCanUpdate","hostOptions","options","label","rules","getJobs","isZabbixData","hostData","console","log","setItem","currentRoute","path","removeItem","productSelect","e","productSelectDialog","handleClick","tab","props","name","debounceMethods","func","time","args","context","this","callNow","setTimeout","apply","parse","handleDeleteTag","tag","splice","indexOf","Object","assign","change","changeSql","formData","url","unshift","err_message","showClose","duration"],"sourceRoot":""}