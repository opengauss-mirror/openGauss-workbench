"use strict";(self["webpackChunkopengauss"]=self["webpackChunkopengauss"]||[]).push([[966],{5712:function(e,a,l){l.r(a),l.d(a,{default:function(){return Z}});var t=l(3396),r=l(4870),s=l(2748),d=l(7178),o=l(2483);const p=e=>((0,t.dD)("data-v-0767148c"),e=e(),(0,t.Cn)(),e),m={class:"wrap"},n={id:"right"},i=p((()=>(0,t._)("p",{class:"tipck"},"实例名称：被监控源端数据库的实例别名，建议按业务规则命名",-1))),u=p((()=>(0,t._)("p",{class:"tipck"},"主机地址：被监控源端数据库的主机IP地址",-1))),c=p((()=>(0,t._)("p",{class:"tipck"},"主机端口：被监控源端数据库的主机端口",-1))),g=p((()=>(0,t._)("p",{class:"tipck"},"只读用户：被监控源端数据库的用户，对监控对象具有只读权限",-1))),w=p((()=>(0,t._)("p",{class:"tipck"},"登录密码：被监控源端数据库的密码",-1))),f=p((()=>(0,t._)("p",{class:"tipck",style:{"font-style":"italic"}},"注：需要提前将本服务部署地址加入到openGauss的pg_hba.conf中进行客户端接入认证",-1))),_={style:{"text-align":"center",padding:"5vh 0px 32px 0px"}},b=p((()=>(0,t._)("p",{class:"tipck"},"实例名称：zabbix监控平台元数据库实例名",-1))),W=p((()=>(0,t._)("p",{class:"tipck"},"主机地址：zabbix监控平台元数据库主机IP地址",-1))),U=p((()=>(0,t._)("p",{class:"tipck"},"主机端口：zabbix监控平台元数据库主机端口",-1))),h=p((()=>(0,t._)("p",{class:"tipck"},"数据库名：zabbix监控平台元数据库数据库库名",-1))),x=p((()=>(0,t._)("p",{class:"tipck"},"读写用户：zabbix监控平台元数据库用户，具有读写权限",-1))),V=p((()=>(0,t._)("p",{class:"tipck"},"登录密码：zabbix监控平台元数据库密码",-1))),v={style:{"text-align":"center",padding:"5vh 0px 32px 0px"}},S=p((()=>(0,t._)("p",{class:"tipck"},"服务端地址：nagios监控平台服务端数据库主机IP地址",-1))),N=p((()=>(0,t._)("p",{class:"tipck"},"服务端用户名：nagios监控平台服务端数据库用户，具有读写权限",-1))),y=p((()=>(0,t._)("p",{class:"tipck"},"服务端密码：nagios监控平台服务端数据库密码",-1))),k=p((()=>(0,t._)("p",{class:"tipck"},"服务端路径：nagios监控平台服务端安装路径",-1))),P=p((()=>(0,t._)("p",{class:"tipck"},"客户端地址：nagios监控平台客户端数据库主机IP地址",-1))),z=p((()=>(0,t._)("p",{class:"tipck"},"客户端用户名：nagios监控平台客户端数据库用户，具有读写权限",-1))),I=p((()=>(0,t._)("p",{class:"tipck"},"客户端密码：nagios监控平台客户端数据库密码",-1))),q=p((()=>(0,t._)("p",{class:"tipck"},"客户端路径：nagios监控平台客户端安装路径",-1))),C={class:"parent"},F={class:"left"},$={class:"right"},B={style:{"text-align":"center",padding:"10vh 0px 32px 0px"}};var j={__name:"configurationCenter",setup(e){const a=(0,o.tv)(),{proxy:l}=(0,t.FN)();let p=(0,r.iH)(localStorage.getItem("activeName")?localStorage.getItem("activeName"):"first");const j=(0,r.iH)(null),H=(0,r.iH)(null),R=(0,r.iH)(null);let Z=(0,r.qj)({connectName:"",userName:"",password:"",port:"",ip:"",platform:"Prometheus"}),D=(0,r.qj)({containerIp:"",containerPort:"",connectName:"",userName:"",password:"",port:"",ip:"",dataBaseName:"",platform:"Zabbix"}),G=(0,r.qj)({serverIp:"",serverName:"",serverPassword:"",serverPath:"",clientIp:"",clientName:"",clientPassword:"",clientPath:"",platform:"Nagios"});const Y=(0,r.qj)({connectName:[{required:!0,message:"请输入实例名称",trigger:"blur"},{pattern:/^[0-9A-Za-z_]{2,16}$/g,message:"连接名称只支持英文、下划线、数字组合2-16个字符"}],userName:[{required:!0,message:"请输入用户",trigger:"blur"},{min:1,max:100,message:"长度在 1 到 100 个字符",trigger:"blur"}],dataBaseName:[{required:!0,message:"请输入数据库库名",trigger:"blur"},{min:1,max:100,message:"长度在 1 到 100 个字符",trigger:"blur"}],password:[{required:!0,message:"请输入登录密码",trigger:"blur"},{min:1,max:100,message:"长度在 1 到 100 个字符",trigger:"blur"}],ip:[{required:!0,message:"请输入主机地址",trigger:"blur"},{pattern:/^(\d|[1-9]\d|1\d{2}|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d{2}|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d{2}|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d{2}|2[0-4]\d|25[0-5])$/,message:"只允许输入IP地址"}],port:[{required:!0,message:"请输入主机端口",trigger:"blur"},{pattern:/^((6[0-4]\d{3}|65[0-4]\d{2}|655[0-2]\d|6553[0-5])|[0-5]?\d{0,4})$/g,message:"只允许输入端口号"}],serverIp:[{required:!0,message:"请输入主机地址",trigger:"blur"},{pattern:/^(\d|[1-9]\d|1\d{2}|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d{2}|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d{2}|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d{2}|2[0-4]\d|25[0-5])$/,message:"只允许输入IP地址"}],clientIp:[{required:!0,message:"请输入主机地址",trigger:"blur"},{pattern:/^(\d|[1-9]\d|1\d{2}|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d{2}|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d{2}|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d{2}|2[0-4]\d|25[0-5])$/,message:"只允许输入IP地址"}],serverName:[{required:!0,message:"请输入用户",trigger:"blur"},{min:1,max:100,message:"长度在 1 到 100 个字符",trigger:"blur"}],clientName:[{required:!0,message:"请输入用户",trigger:"blur"},{min:1,max:100,message:"长度在 1 到 100 个字符",trigger:"blur"}],serverPassword:[{required:!0,message:"请输入登录密码",trigger:"blur"},{min:1,max:100,message:"长度在 1 到 100 个字符",trigger:"blur"}],clientPassword:[{required:!0,message:"请输入登录密码",trigger:"blur"},{min:1,max:100,message:"长度在 1 到 100 个字符",trigger:"blur"}],serverPath:[{required:!0,message:"请输入服务端路径",trigger:"blur"},{min:1,max:100,message:"长度在 1 到 100 个字符",trigger:"blur"}],clientPath:[{required:!0,message:"请输入客户端路径",trigger:"blur"},{min:1,max:100,message:"长度在 1 到 100 个字符",trigger:"blur"}]});(0,t.bv)((()=>{A()})),(0,t.YP)(p,(e=>{localStorage.setItem("activeName",e)})),(0,t.YP)((()=>a.currentRoute.value.path),(()=>{localStorage.removeItem("activeName")}));const A=()=>{l.$http.get("/data/zabbix/config").then((e=>{if(200==e.data.code)e.data.data&&(D.connectName=e.data.data.connectName,D.port=e.data.data.port,D.ip=e.data.data.ip,D.userName=e.data.data.userName,D.dataBaseName=e.data.data.dataBaseName);else if(400==e.data.code)return!1})).catch((()=>{d.z8.warning("请求失败")})),l.$http.get("/data/nagios/config").then((e=>{if(200==e.data.code)e.data.data&&(G.serverIp=e.data.data.serverIp,G.serverName=e.data.data.serverName,G.serverPath=e.data.data.serverPath,G.clientIp=e.data.data.clientIp,G.clientName=e.data.data.clientName,G.clientPath=e.data.data.clientPath);else if(400==e.data.code)return!1})).catch((()=>{d.z8.warning("请求失败")}))},J=()=>{D.containerIp=window.location.host.split(":")[0],D.containerPort=window.location.host.split(":")[1]},O=e=>{l.$refs[e].validate((e=>{if(!e)return!1;{let e;"first"==p.value?e=Z:"second"==p.value?(J(),e=D):e=G,l.$http.post("/data/create/config",JSON.stringify(e)).then((e=>{200==e.data.code?(A(),d.z8.success("保存成功")):400==e.data.code&&d.z8.warning(e.data.message)})).catch((()=>{d.z8.warning("保存失败")}))}})),l.$unFocus()},E=e=>{l.$unFocus(),l.$refs[e].resetFields()};return(e,a)=>{const l=(0,t.up)("el-icon"),d=(0,t.up)("el-col"),o=(0,t.up)("el-row"),A=(0,t.up)("el-card"),J=(0,t.up)("el-input"),K=(0,t.up)("el-form-item"),L=(0,t.up)("el-form"),M=(0,t.up)("el-button"),Q=(0,t.up)("el-tab-pane"),T=(0,t.up)("el-tabs");return(0,t.wg)(),(0,t.iD)("div",m,[(0,t._)("section",n,[(0,t.Wm)(T,{modelValue:(0,r.SU)(p),"onUpdate:modelValue":a[25]||(a[25]=e=>(0,r.dq)(p)?p.value=e:p=e)},{default:(0,t.w5)((()=>[(0,t.Wm)(Q,{label:"openGauss",name:"first",style:{"font-size":"16px"}},{default:(0,t.w5)((()=>[(0,t.Wm)(A,{shadow:"never"},{default:(0,t.w5)((()=>[(0,t.Wm)(o,{class:"rowColor"},{default:(0,t.w5)((()=>[(0,t.Wm)(d,{span:1,style:{"text-align":"center","padding-top":"16px"}},{default:(0,t.w5)((()=>[(0,t.Wm)(l,{style:{"font-size":"20px"}},{default:(0,t.w5)((()=>[(0,t.Wm)((0,r.SU)(s.Rrw))])),_:1})])),_:1}),(0,t.Wm)(d,{span:23,style:{"font-size":"14px"}},{default:(0,t.w5)((()=>[i,u,c,g,w,f])),_:1})])),_:1})])),_:1}),(0,t.Wm)(o,{style:{"margin-top":"24px"}},{default:(0,t.w5)((()=>[(0,t.Wm)(d,{span:10,style:{height:"100%"}},{default:(0,t.w5)((()=>[(0,t.Wm)(L,{model:(0,r.SU)(Z),"label-position":"left",rules:Y,ref_key:"openForm",ref:j,"label-width":"90px",class:"demo-ruleForm",style:{margin:"0px 24px 0px 0px"}},{default:(0,t.w5)((()=>[(0,t.Wm)(K,{label:"实例名称",prop:"connectName"},{default:(0,t.w5)((()=>[(0,t.Wm)(J,{modelValue:(0,r.SU)(Z).connectName,"onUpdate:modelValue":a[0]||(a[0]=e=>(0,r.SU)(Z).connectName=e),placeholder:"示例：business_master"},null,8,["modelValue"])])),_:1}),(0,t.Wm)(K,{label:"主机地址",prop:"ip"},{default:(0,t.w5)((()=>[(0,t.Wm)(J,{modelValue:(0,r.SU)(Z).ip,"onUpdate:modelValue":a[1]||(a[1]=e=>(0,r.SU)(Z).ip=e),placeholder:"示例：192.168.0.10"},null,8,["modelValue"])])),_:1}),(0,t.Wm)(K,{label:"主机端口",prop:"port"},{default:(0,t.w5)((()=>[(0,t.Wm)(J,{modelValue:(0,r.SU)(Z).port,"onUpdate:modelValue":a[2]||(a[2]=e=>(0,r.SU)(Z).port=e),placeholder:"示例：5432"},null,8,["modelValue"])])),_:1}),(0,t.Wm)(K,{label:"只读用户",prop:"userName"},{default:(0,t.w5)((()=>[(0,t.Wm)(J,{modelValue:(0,r.SU)(Z).userName,"onUpdate:modelValue":a[3]||(a[3]=e=>(0,r.SU)(Z).userName=e),placeholder:"示例：zabbix_readonly"},null,8,["modelValue"])])),_:1}),(0,t.Wm)(K,{label:"登录密码",prop:"password"},{default:(0,t.w5)((()=>[(0,t.Wm)(J,{type:"password",modelValue:(0,r.SU)(Z).password,"onUpdate:modelValue":a[4]||(a[4]=e=>(0,r.SU)(Z).password=e),placeholder:"示例：d(*dS1"},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1}),(0,t.Wm)(d,{span:24},{default:(0,t.w5)((()=>[(0,t._)("div",_,[(0,t.Wm)(M,{size:"large",type:"primary",onClick:a[5]||(a[5]=e=>O("openForm"))},{default:(0,t.w5)((()=>[(0,t.Uk)("保存配置")])),_:1}),(0,t.Wm)(M,{size:"large",class:"buttonColor",onClick:a[6]||(a[6]=e=>E("openForm"))},{default:(0,t.w5)((()=>[(0,t.Uk)("重置数据")])),_:1})])])),_:1})])),_:1})])),_:1}),(0,t.Wm)(Q,{label:"Zabbix",name:"second",style:{"font-size":"16px"}},{default:(0,t.w5)((()=>[(0,t.Wm)(A,{shadow:"never"},{default:(0,t.w5)((()=>[(0,t.Wm)(o,{class:"rowColor"},{default:(0,t.w5)((()=>[(0,t.Wm)(d,{span:1,style:{"text-align":"center","padding-top":"16px"}},{default:(0,t.w5)((()=>[(0,t.Wm)(l,{style:{"font-size":"20px"}},{default:(0,t.w5)((()=>[(0,t.Wm)((0,r.SU)(s.Rrw))])),_:1})])),_:1}),(0,t.Wm)(d,{span:23,style:{"font-size":"14px"}},{default:(0,t.w5)((()=>[b,W,U,h,x,V])),_:1})])),_:1})])),_:1}),(0,t.Wm)(o,{style:{"margin-top":"24px"}},{default:(0,t.w5)((()=>[(0,t.Wm)(d,{span:10,style:{height:"100%"}},{default:(0,t.w5)((()=>[(0,t.Wm)(L,{model:(0,r.SU)(D),"label-position":"left",rules:Y,ref_key:"zabbixForm",ref:H,"label-width":"90px",class:"demo-ruleForm",style:{margin:"0px 24px 0px 0px"}},{default:(0,t.w5)((()=>[(0,t.Wm)(K,{label:"实例名称",prop:"connectName"},{default:(0,t.w5)((()=>[(0,t.Wm)(J,{modelValue:(0,r.SU)(D).connectName,"onUpdate:modelValue":a[7]||(a[7]=e=>(0,r.SU)(D).connectName=e),placeholder:"示例：business_master"},null,8,["modelValue"])])),_:1}),(0,t.Wm)(K,{label:"主机地址",prop:"ip"},{default:(0,t.w5)((()=>[(0,t.Wm)(J,{modelValue:(0,r.SU)(D).ip,"onUpdate:modelValue":a[8]||(a[8]=e=>(0,r.SU)(D).ip=e),placeholder:"示例：192.168.0.10"},null,8,["modelValue"])])),_:1}),(0,t.Wm)(K,{label:"主机端口",prop:"port"},{default:(0,t.w5)((()=>[(0,t.Wm)(J,{modelValue:(0,r.SU)(D).port,"onUpdate:modelValue":a[9]||(a[9]=e=>(0,r.SU)(D).port=e),placeholder:"示例：5432"},null,8,["modelValue"])])),_:1}),(0,t.Wm)(K,{label:"数据库名",prop:"dataBaseName"},{default:(0,t.w5)((()=>[(0,t.Wm)(J,{modelValue:(0,r.SU)(D).dataBaseName,"onUpdate:modelValue":a[10]||(a[10]=e=>(0,r.SU)(D).dataBaseName=e),placeholder:"示例：zabbix"},null,8,["modelValue"])])),_:1}),(0,t.Wm)(K,{label:"读写用户",prop:"userName"},{default:(0,t.w5)((()=>[(0,t.Wm)(J,{modelValue:(0,r.SU)(D).userName,"onUpdate:modelValue":a[11]||(a[11]=e=>(0,r.SU)(D).userName=e),placeholder:"示例：zabbix_readonly"},null,8,["modelValue"])])),_:1}),(0,t.Wm)(K,{label:"登录密码",prop:"password"},{default:(0,t.w5)((()=>[(0,t.Wm)(J,{type:"password",modelValue:(0,r.SU)(D).password,"onUpdate:modelValue":a[12]||(a[12]=e=>(0,r.SU)(D).password=e),placeholder:"示例：d(*dS1"},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1}),(0,t.Wm)(d,{span:24},{default:(0,t.w5)((()=>[(0,t._)("div",v,[(0,t.Wm)(M,{size:"large",type:"primary",onClick:a[13]||(a[13]=e=>O("zabbixForm"))},{default:(0,t.w5)((()=>[(0,t.Uk)("保存配置")])),_:1}),(0,t.Wm)(M,{size:"large",class:"buttonColor",onClick:a[14]||(a[14]=e=>E("zabbixForm"))},{default:(0,t.w5)((()=>[(0,t.Uk)("重置数据")])),_:1})])])),_:1})])),_:1})])),_:1}),(0,t.Wm)(Q,{label:"Nagios",name:"three",style:{"font-size":"16px"}},{default:(0,t.w5)((()=>[(0,t.Wm)(A,{shadow:"never"},{default:(0,t.w5)((()=>[(0,t.Wm)(o,{class:"rowColor"},{default:(0,t.w5)((()=>[(0,t.Wm)(d,{span:1,style:{"text-align":"center","padding-top":"16px"}},{default:(0,t.w5)((()=>[(0,t.Wm)(l,{style:{"font-size":"20px"}},{default:(0,t.w5)((()=>[(0,t.Wm)((0,r.SU)(s.Rrw))])),_:1})])),_:1}),(0,t.Wm)(d,{span:23,style:{"font-size":"14px"}},{default:(0,t.w5)((()=>[(0,t.Wm)(o,{class:"rowColor"},{default:(0,t.w5)((()=>[(0,t.Wm)(d,{span:12},{default:(0,t.w5)((()=>[S,N,y,k])),_:1}),(0,t.Wm)(d,{span:12},{default:(0,t.w5)((()=>[P,z,I,q])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),(0,t.Wm)(o,{style:{"margin-top":"24px"}},{default:(0,t.w5)((()=>[(0,t.Wm)(d,{span:24,style:{height:"100%"}},{default:(0,t.w5)((()=>[(0,t.Wm)(L,{model:(0,r.SU)(G),"label-position":"left",rules:Y,ref_key:"nagiosForm",ref:R,"label-width":"110px",class:"demo-ruleForm"},{default:(0,t.w5)((()=>[(0,t._)("div",C,[(0,t._)("div",F,[(0,t.Wm)(K,{label:"服务端地址",prop:"serverIp"},{default:(0,t.w5)((()=>[(0,t.Wm)(J,{modelValue:(0,r.SU)(G).serverIp,"onUpdate:modelValue":a[15]||(a[15]=e=>(0,r.SU)(G).serverIp=e),placeholder:"示例：192.168.0.10"},null,8,["modelValue"])])),_:1}),(0,t.Wm)(K,{label:"服务端用户名",prop:"serverName"},{default:(0,t.w5)((()=>[(0,t.Wm)(J,{modelValue:(0,r.SU)(G).serverName,"onUpdate:modelValue":a[16]||(a[16]=e=>(0,r.SU)(G).serverName=e),placeholder:"示例：nagios_readonly"},null,8,["modelValue"])])),_:1}),(0,t.Wm)(K,{label:"服务端密码",prop:"serverPassword"},{default:(0,t.w5)((()=>[(0,t.Wm)(J,{type:"password",modelValue:(0,r.SU)(G).serverPassword,"onUpdate:modelValue":a[17]||(a[17]=e=>(0,r.SU)(G).serverPassword=e),placeholder:"示例：d(*dS1"},null,8,["modelValue"])])),_:1}),(0,t.Wm)(K,{label:"服务端路径",prop:"serverPath"},{default:(0,t.w5)((()=>[(0,t.Wm)(J,{modelValue:(0,r.SU)(G).serverPath,"onUpdate:modelValue":a[18]||(a[18]=e=>(0,r.SU)(G).serverPath=e),placeholder:"示例：/usr/local/nagios"},null,8,["modelValue"])])),_:1})]),(0,t._)("div",$,[(0,t.Wm)(K,{label:"客户端地址",prop:"clientIp"},{default:(0,t.w5)((()=>[(0,t.Wm)(J,{modelValue:(0,r.SU)(G).clientIp,"onUpdate:modelValue":a[19]||(a[19]=e=>(0,r.SU)(G).clientIp=e),placeholder:"示例：192.168.0.10"},null,8,["modelValue"])])),_:1}),(0,t.Wm)(K,{label:"客户端用户名",prop:"clientName"},{default:(0,t.w5)((()=>[(0,t.Wm)(J,{modelValue:(0,r.SU)(G).clientName,"onUpdate:modelValue":a[20]||(a[20]=e=>(0,r.SU)(G).clientName=e),placeholder:"示例：nagios_readonly"},null,8,["modelValue"])])),_:1}),(0,t.Wm)(K,{label:"客户端密码",prop:"clientPassword"},{default:(0,t.w5)((()=>[(0,t.Wm)(J,{type:"password",modelValue:(0,r.SU)(G).clientPassword,"onUpdate:modelValue":a[21]||(a[21]=e=>(0,r.SU)(G).clientPassword=e),placeholder:"示例：d(*dS1"},null,8,["modelValue"])])),_:1}),(0,t.Wm)(K,{label:"客户端路径",prop:"clientPath"},{default:(0,t.w5)((()=>[(0,t.Wm)(J,{modelValue:(0,r.SU)(G).clientPath,"onUpdate:modelValue":a[22]||(a[22]=e=>(0,r.SU)(G).clientPath=e),placeholder:"示例：/usr/local/nagios"},null,8,["modelValue"])])),_:1})])])])),_:1},8,["model","rules"])])),_:1}),(0,t.Wm)(d,{span:24},{default:(0,t.w5)((()=>[(0,t._)("div",B,[(0,t.Wm)(M,{size:"large",type:"primary",onClick:a[23]||(a[23]=e=>O("nagiosForm"))},{default:(0,t.w5)((()=>[(0,t.Uk)("保存配置")])),_:1}),(0,t.Wm)(M,{size:"large",class:"buttonColor",onClick:a[24]||(a[24]=e=>E("nagiosForm"))},{default:(0,t.w5)((()=>[(0,t.Uk)("重置数据")])),_:1})])])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])])])}}},H=l(89);const R=(0,H.Z)(j,[["__scopeId","data-v-0767148c"]]);var Z=R}}]);
//# sourceMappingURL=dashboard.5aaff760.js.map